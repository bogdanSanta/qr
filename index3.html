<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Modern QR Code Generator</title>
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- QR Code Styling Library via CDN -->
    <script src="https://unpkg.com/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>
  </head>
  <body class="bg-gray-100">
    <div class="container mx-auto p-8">
      <!-- Main Card -->
      <div class="flex flex-col md:flex-row bg-white shadow-lg rounded-lg overflow-hidden">
        <!-- Left Panel: Controls & Customization -->
        <div class="w-full md:w-1/2 p-6">
          <h1 class="text-2xl font-bold mb-4">QR Code Generator</h1>
          <!-- QR Type Selection & Input -->
          <div class="mb-4">
            <div class="flex space-x-2 mb-2">
              <button
                id="type-url"
                class="px-4 py-2 bg-blue-500 text-white rounded focus:outline-none"
              >
                Website URL
              </button>
              <button
                id="type-vcard"
                class="px-4 py-2 bg-gray-200 text-gray-700 rounded focus:outline-none"
              >
                vCard
              </button>
              <button
                id="type-text"
                class="px-4 py-2 bg-gray-200 text-gray-700 rounded focus:outline-none"
              >
                Text
              </button>
            </div>
            <input
              id="qr-input"
              type="text"
              placeholder="Enter Website URL..."
              class="w-full px-4 py-2 border rounded focus:outline-none"
            />
          </div>
          
              <!-- vCard Inputs (Hidden by Default) -->
            <div id="vcard-inputs" class="hidden">
                <input type="text" id="vcard-name" class="w-full p-2 border rounded mb-2" placeholder="Full Name">
                <input type="text" id="vcard-phone" class="w-full p-2 border rounded mb-2" placeholder="Phone Number">
                <input type="email" id="vcard-email" class="w-full p-2 border rounded mb-2" placeholder="Email">
                <input type="text" id="vcard-company" class="w-full p-2 border rounded mb-2" placeholder="Company (Optional)">
                <input type="text" id="vcard-title" class="w-full p-2 border rounded mb-2" placeholder="Job Title (Optional)">
                <input type="text" id="vcard-website" class="w-full p-2 border rounded mb-2" placeholder="Website (Optional)">
                <input type="text" id="vcard-address" class="w-full p-2 border rounded mb-2" placeholder="Address (Optional)">
            </div>

          <!-- Pattern Selection Cards -->
          <div class="mb-4">
            <p class="mb-2 font-semibold">Pattern</p>
            <div id="pattern-cards" class="grid grid-cols-3 gap-2">
              <div
                class="pattern-card border rounded p-2 text-center cursor-pointer"
                data-pattern="dots"
              >
                Dots
              </div>
              <div
                class="pattern-card border rounded p-2 text-center cursor-pointer"
                data-pattern="rounded"
              >
                Rounded
              </div>
              <div
                class="pattern-card border rounded p-2 text-center cursor-pointer"
                data-pattern="classy"
              >
                Classy
              </div>
              <div
                class="pattern-card border rounded p-2 text-center cursor-pointer"
                data-pattern="classy-rounded"
              >
                Classy Rounded
              </div>
              <div
                class="pattern-card border rounded p-2 text-center cursor-pointer"
                data-pattern="square"
              >
                Square
              </div>
              <div
                class="pattern-card border rounded p-2 text-center cursor-pointer"
                data-pattern="extra-rounded"
              >
                Extra Rounded
              </div>
            </div>
          </div>

          <!-- Dots Color Selection Cards -->
          <div class="mb-4">
            <p class="mb-2 font-semibold">Dots Color</p>
            <div id="color-cards" class="grid grid-cols-4 gap-2">
              <div
                class="color-card border rounded p-2 text-center cursor-pointer"
                data-color="#000000"
              >
                <div
                  class="w-8 h-8 mx-auto rounded-full"
                  style="background-color: #000000;"
                ></div>
                <span class="text-sm">Black</span>
              </div>
              <div
                class="color-card border rounded p-2 text-center cursor-pointer"
                data-color="#800080"
              >
                <div
                  class="w-8 h-8 mx-auto rounded-full"
                  style="background-color: #800080;"
                ></div>
                <span class="text-sm">Purple</span>
              </div>
              <div
                class="color-card border rounded p-2 text-center cursor-pointer"
                data-color="#FFFF00"
              >
                <div
                  class="w-8 h-8 mx-auto rounded-full"
                  style="background-color: #FFFF00;"
                ></div>
                <span class="text-sm">Yellow</span>
              </div>
              <div
                class="color-card border rounded p-2 text-center cursor-pointer"
                data-color="#FFA500"
              >
                <div
                  class="w-8 h-8 mx-auto rounded-full"
                  style="background-color: #FFA500;"
                ></div>
                <span class="text-sm">Orange</span>
              </div>
              <div
                class="color-card border rounded p-2 text-center cursor-pointer"
                data-color="#FF0000"
              >
                <div
                  class="w-8 h-8 mx-auto rounded-full"
                  style="background-color: #FF0000;"
                ></div>
                <span class="text-sm">Red</span>
              </div>
              <div
                class="color-card border rounded p-2 text-center cursor-pointer"
                data-color="#FFC0CB"
              >
                <div
                  class="w-8 h-8 mx-auto rounded-full"
                  style="background-color: #FFC0CB;"
                ></div>
                <span class="text-sm">Pink</span>
              </div>
              <div
                class="color-card border rounded p-2 text-center cursor-pointer"
                data-color="#008000"
              >
                <div
                  class="w-8 h-8 mx-auto rounded-full"
                  style="background-color: #008000;"
                ></div>
                <span class="text-sm">Green</span>
              </div>
              <!-- Custom Dots Color Card -->
              <div
                class="color-card border rounded p-2 text-center cursor-pointer custom-color-card"
                data-color="custom"
              >
                <div
                  class="w-8 h-8 mx-auto rounded-full flex items-center justify-center"
                  style="background-color: transparent;"
                >
                  <span class="text-xl">+</span>
                </div>
                <span class="text-sm">Custom</span>
              </div>
            </div>
          </div>

          <!-- Background Color Selection Cards -->
          <div class="mb-4">
            <p class="mb-2 font-semibold">Background Color</p>
            <div id="bg-color-cards" class="grid grid-cols-4 gap-2">
              <div
                class="bg-color-card border rounded p-2 text-center cursor-pointer"
                data-bgcolor="#ffffff"
              >
                <div
                  class="w-8 h-8 mx-auto rounded-full"
                  style="background-color: #ffffff;"
                ></div>
                <span class="text-sm">White</span>
              </div>
              <div
                class="bg-color-card border rounded p-2 text-center cursor-pointer"
                data-bgcolor="#000000"
              >
                <div
                  class="w-8 h-8 mx-auto rounded-full"
                  style="background-color: #000000;"
                ></div>
                <span class="text-sm">Black</span>
              </div>
              <div
                class="bg-color-card border rounded p-2 text-center cursor-pointer"
                data-bgcolor="#f5f5f5"
              >
                <div
                  class="w-8 h-8 mx-auto rounded-full"
                  style="background-color: #f5f5f5;"
                ></div>
                <span class="text-sm">Light Gray</span>
              </div>
              <!-- Custom Background Color Card -->
              <div
                class="bg-color-card border rounded p-2 text-center cursor-pointer custom-bg-color-card"
                data-bgcolor="custom"
              >
                <div
                  class="w-8 h-8 mx-auto rounded-full flex items-center justify-center"
                  style="background-color: transparent;"
                >
                  <span class="text-xl">+</span>
                </div>
                <span class="text-sm">Custom</span>
              </div>
            </div>
          </div>

          <!-- Generate Button -->
          <button
            id="generate-btn"
            class="w-full px-4 py-2 bg-green-500 text-white rounded focus:outline-none"
          >
            Generate
          </button>

          <!-- Hidden Inputs for Custom Color Pickers -->
          <input type="color" id="custom-color-picker" class="hidden" />
          <input type="color" id="custom-bg-color-picker" class="hidden" />
        </div>

        <!-- Right Panel: QR Code Preview & Download -->
        <div class="w-full md:w-1/2 p-6 flex flex-col items-center justify-center">
          <!-- Preview Area -->
          <div id="qr-code" class="mb-4"></div>
          <!-- Download Buttons -->
          <div class="flex space-x-2">
            <button
              id="download-jpg"
              class="px-4 py-2 bg-indigo-500 text-white rounded focus:outline-none"
            >
              Download JPG
            </button>
            <button
              id="download-svg"
              class="px-4 py-2 bg-indigo-500 text-white rounded focus:outline-none"
            >
              Download SVG
            </button>
          </div>
        </div>
      </div>

      <!-- Footer & Sponsors -->
      <footer class="mt-8 text-center">
        <p class="mb-4">
          Itâ€™s free because we have the following sponsors:
        </p>
        <div class="flex justify-center space-x-8">
          <img
            src="https://via.placeholder.com/100x50?text=Amazon"
            alt="Amazon"
            class="h-12"
          />
          <img
            src="https://via.placeholder.com/100x50?text=eMAG"
            alt="eMAG"
            class="h-12"
          />
          <img
            src="https://via.placeholder.com/100x50?text=RWS"
            alt="RWS"
            class="h-12"
          />
        </div>
      </footer>
    </div>

    <!-- JavaScript -->
    <script>
      // Global variables for selected options
      let selectedPattern = "dots";
      let selectedColor = "#000000";
      let selectedBgColor = "#ffffff";
      let currentQRType = "url";

      // Initialize the QR Code with default options
      const qrCode = new QRCodeStyling({
        width: 250,
        height: 250,
        data: "",
        dotsOptions: {
          type: selectedPattern,
          color: selectedColor,
        },
        backgroundOptions: {
          color: selectedBgColor,
        },
      });

      // Append the QR code to the preview container
      const qrCodeContainer = document.getElementById("qr-code");
      qrCode.append(qrCodeContainer);

      // --- QR Type Button Event Listeners ---
      const btnUrl = document.getElementById("type-url");
      const btnVcard = document.getElementById("type-vcard");
      const btnText = document.getElementById("type-text");
      const qrInput = document.getElementById("qr-input");

      btnUrl.addEventListener("click", () => {
        currentQRType = "url";
        btnUrl.classList.replace("bg-gray-200", "bg-blue-500");
        btnUrl.classList.replace("text-gray-700", "text-white");
        btnVcard.classList.replace("bg-blue-500", "bg-gray-200");
        btnVcard.classList.replace("text-white", "text-gray-700");
        btnText.classList.replace("bg-blue-500", "bg-gray-200");
        btnText.classList.replace("text-white", "text-gray-700");
        qrInput.placeholder = "Enter Website URL...";
      });

      btnVcard.addEventListener("click", () => {
        currentQRType = "vcard";
        btnVcard.classList.replace("bg-gray-200", "bg-blue-500");
        btnVcard.classList.replace("text-gray-700", "text-white");
        btnUrl.classList.replace("bg-blue-500", "bg-gray-200");
        btnUrl.classList.replace("text-white", "text-gray-700");
        btnText.classList.replace("bg-blue-500", "bg-gray-200");
        btnText.classList.replace("text-white", "text-gray-700");
        qrInput.placeholder =
          "Enter vCard data (e.g., Name;Phone;Email)...";
      });

      btnText.addEventListener("click", () => {
        currentQRType = "text";
        btnText.classList.replace("bg-gray-200", "bg-blue-500");
        btnText.classList.replace("text-gray-700", "text-white");
        btnUrl.classList.replace("bg-blue-500", "bg-gray-200");
        btnUrl.classList.replace("text-white", "text-gray-700");
        btnVcard.classList.replace("bg-blue-500", "bg-gray-200");
        btnVcard.classList.replace("text-white", "text-gray-700");
        qrInput.placeholder = "Enter Text...";
      });

      // --- Helper Function to Update the QR Code ---
      function updateQRCode(options = {}) {
        const currentData = qrCode.options.data;
        qrCode.update({
          data: currentData,
          dotsOptions: {
            type: selectedPattern,
            color: selectedColor,
          },
          backgroundOptions: {
            color: selectedBgColor,
          },
          ...options,
        });
      }

      // --- Pattern Cards Event Listeners ---
      document.querySelectorAll(".pattern-card").forEach((card) => {
        card.addEventListener("click", () => {
          selectedPattern = card.getAttribute("data-pattern");
          document
            .querySelectorAll(".pattern-card")
            .forEach((c) => c.classList.remove("border-blue-500", "border-2"));
          card.classList.add("border-blue-500", "border-2");
          updateQRCode();
        });
      });

      // --- Dots Color Cards Event Listeners ---
      document.querySelectorAll(".color-card").forEach((card) => {
        card.addEventListener("click", () => {
          const newColor = card.getAttribute("data-color");
          if (newColor === "custom") {
            document.getElementById("custom-color-picker").click();
          } else {
            selectedColor = newColor;
            document
              .querySelectorAll(".color-card")
              .forEach((c) => c.classList.remove("border-blue-500", "border-2"));
            card.classList.add("border-blue-500", "border-2");
            updateQRCode();
          }
        });
      });

      // --- Custom Dots Color Picker ---
      document
        .getElementById("custom-color-picker")
        .addEventListener("change", function (e) {
          selectedColor = e.target.value;
          document
            .querySelectorAll(".color-card")
            .forEach((c) => c.classList.remove("border-blue-500", "border-2"));
          const customCard = document.querySelector(".custom-color-card");
          if (customCard) {
            customCard.querySelector("div").style.backgroundColor = selectedColor;
            customCard.classList.add("border-blue-500", "border-2");
          }
          updateQRCode();
        });

      // --- Background Color Cards Event Listeners ---
      document.querySelectorAll(".bg-color-card").forEach((card) => {
        card.addEventListener("click", () => {
          const newBgColor = card.getAttribute("data-bgcolor");
          if (newBgColor === "custom") {
            document.getElementById("custom-bg-color-picker").click();
          } else {
            selectedBgColor = newBgColor;
            document
              .querySelectorAll(".bg-color-card")
              .forEach((c) => c.classList.remove("border-blue-500", "border-2"));
            card.classList.add("border-blue-500", "border-2");
            updateQRCode();
          }
        });
      });

      // --- Custom Background Color Picker ---
      document
        .getElementById("custom-bg-color-picker")
        .addEventListener("change", function (e) {
          selectedBgColor = e.target.value;
          document
            .querySelectorAll(".bg-color-card")
            .forEach((c) => c.classList.remove("border-blue-500", "border-2"));
          const customBgCard = document.querySelector(".custom-bg-color-card");
          if (customBgCard) {
            customBgCard.querySelector("div").style.backgroundColor =
              selectedBgColor;
            customBgCard.classList.add("border-blue-500", "border-2");
          }
          updateQRCode();
        });

      // --- Generate Button Event Listener ---
      document.getElementById("generate-btn").addEventListener("click", () => {
        const input = qrInput.value.trim();
        if (!input) {
          alert("Please enter some content for the QR code.");
          return;
        }
        let data = input;
        if (currentQRType === "vcard") {
          const parts = input.split(";");
          if (parts.length < 3) {
            alert("Please enter vCard data in the format: Name;Phone;Email");
            return;
          }
          const [name, phone, email] = parts;
          data = `BEGIN:VCARD
VERSION:3.0
N:${name}
TEL:${phone}
EMAIL:${email}
END:VCARD`;
        }
        qrCode.update({
          data: data,
          dotsOptions: {
            type: selectedPattern,
            color: selectedColor,
          },
          backgroundOptions: {
            color: selectedBgColor,
          },
        });
      });

      // --- Download Buttons Event Listeners ---
      document.getElementById("download-jpg").addEventListener("click", () => {
        qrCode.download({ name: "qr-code", extension: "jpg" });
      });

      document.getElementById("download-svg").addEventListener("click", () => {
        qrCode.download({ name: "qr-code", extension: "svg" });
      });
    </script>
  </body>
</html>
